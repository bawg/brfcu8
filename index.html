<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>BRFC U8</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body{font-family:system-ui,Arial,sans-serif;margin:0;padding:24px;line-height:1.45}
    header{margin-bottom:16px}
    nav a{margin-right:12px}
    table{border-collapse:collapse;width:100%;margin:12px 0}
    th,td{border:1px solid #ddd;padding:8px;text-align:left}
    th{background:#f5f5f5}
    .card{border:1px solid #e5e5e5;border-radius:10px;padding:16px;margin:16px 0}
    textarea{width:100%;min-height:120px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    @media (max-width:800px){.row{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <h1>BRFC U8</h1>
    <nav>
      <a href="#festivals">Festivals</a>
      <a href="#notes">Coach Notes</a>
    </nav>
  </header>

  <section id="festivals" class="card">
    <h2>Festivals</h2>
    <table>
      <thead>
        <tr>
          <th>Nr</th>
          <th>Festival</th>
          <th>Club</th>
          <th>Location</th>
          <th>2025-26 Date</th>
          <th>Info</th>
          <th>Tournify</th>
        </tr>
      </thead>
      <tbody>
        <tr id="esher">
          <td>1</td>
          <td>Esher Autumn Festival</td>
          <td>Esher RFC</td>
          <td>Esher RFC, Hersham</td>
          <td>19/10/2025</td>
          <td><a href="https://www.esherrugby.com" target="_blank" rel="noopener">Club site</a></td>
          <td><a href="https://tournifyapp.com" target="_blank" rel="noopener">Tournify</a></td>
        </tr>
      </tbody>
    </table>
  </section>

  <section id="notes" class="card">
    <h2>Coach Notes (in-memory only)</h2>
    <div class="row">
      <div>
        <textarea id="notesText" placeholder="Write notes hereâ€¦"></textarea>
        <div style="margin-top:8px">
          <button id="clearBtn">Clear</button>
        </div>
      </div>
      <div>
        <textarea id="linksJson" placeholder='[{"label":"Esher Info","url":"https://www.esherrugby.com"}]'></textarea>
        <div style="margin-top:8px">
          <button id="applyLinksBtn">Apply Links</button>
        </div>
        <ul id="quickLinks" style="margin-top:8px"></ul>
      </div>
    </div>
  </section>

  <script>
    // In-memory variables
    let notesMemory = "";
    let linksMemory = [];

    const notesEl = document.getElementById("notesText");
    const linksJsonEl = document.getElementById("linksJson");
    const quickLinksEl = document.getElementById("quickLinks");

    // Notes
    notesEl.addEventListener("input", () => {
      notesMemory = notesEl.value;
    });

    document.getElementById("clearBtn").addEventListener("click", () => {
      notesMemory = "";
      notesEl.value = "";
    });

    // Links
    function renderLinks(arr){
      quickLinksEl.innerHTML = "";
      arr.forEach(item => {
        if (!item || !item.url) return;
        let url = item.url.trim();
        if (!/^https?:\/\//i.test(url)) url = "https://" + url.replace(/^\/+/, "");
        const li = document.createElement("li");
        const a = document.createElement("a");
        a.href = url;
        a.target = "_blank";
        a.rel = "noopener";
        a.textContent = item.label || url;
        li.appendChild(a);
        quickLinksEl.appendChild(li);
      });
    }

    document.getElementById("applyLinksBtn").addEventListener("click", () => {
      try {
        linksMemory = JSON.parse(linksJsonEl.value || "[]");
        renderLinks(linksMemory);
      } catch {
        alert("Invalid JSON");
      }
    });
  </script>
</body>
</html>
